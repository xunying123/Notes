# 计网 阅读笔记

[TOC]

## 第一章，堂堂开坑！

- 概述：通信网络是以协议为基础的，且通信通过套接字进行。在按照协议建立连接以后，将数据分包，根据协议加上头尾，从套接字进行传输。
- 接入互联网
  - 拨号上网，和电话线用的同一根线缆，但二者可以并行，因为频率不同；
  - 电缆与光缆，经过调制解调器接入家庭网络；
  - 以太网，一种局域网（LAN）接入技术
- 存储转发传输：把一个包的全部内容都收到以后再进行转发；延迟大，上限低；
- 分组交换：不预留，直接传，网络尽最大努力确保不出错，但不保证；
- 电路交换，在数据传输前建立连接，让途径的交换机和路由预留数据传输的余量；
- FDM频分复用，不同链接分频率；
- TDM时分复用，将时间按帧划分，每个帧分为时隙，不同的连接分配固定的时隙；
- 网络特点：时延，吞吐，丢包；
- tracerote
- 七层OSI网络模型：
  - 应用层：网络应用程序以及其应用协议。DNS？
  - 表示层：数据压缩，加密，数据描述；
  - 会话层：数据交换的同步，建立检查点，恢复；
  - 运输层：TCP/UDP；
  - 网络层：IP;
  - 链路层：以太网，WIFI，DOCSIS；
  - 物理层：实际传输媒体；

## 第二章，应用层

- 客户-服务器结构；P2P；
- 发起通信的的进程成为客户，等待联系的称为服务器；
- 进程通过套接字进行通信；
- TCP：可靠数据传输，需要先握手，建立的连接是全双工的，断开需拆除；
- UDP：无连接，不保证数据传输；
- 应用层协议，定义了不同应用程序之间，如何传输，如HTTP,SMTP；

### Web 和HTTP

- HTTP，超文本传输协议，使用TCP，无状态协议；

- C发起请求，S 接受，建立连接；C 请求文件，S 发送，结束；

- 非持续性连接，持续连接；

```http
GET /somedir/page.html HTTP/1.1
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
  
```

- 以上为一个请求报文，第一行为请求行，之后为首部行，最后一行需要换行；
- 请求行：

  - 方法字段：GET、POST、HEAD、PUT、DELETE
  - URL字段：目标；
  - HTTP版本字段：字面含义；
- 首部行：

  - Host：用来高速缓存；
  - Connection：非持续性连接；
  - User-agent：浏览器类型；
  - Accept-language：语言版本？

```http
HTTP/1.1 200 OK
Connection: close
Date: Tue, 18 Aug 2015 15:44:04 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
Content-Length: 6821
Content-type: text/html
(data.........)
```

- 以上为相应报文，分为初始状态行，首部行，实体体；
- 状态行：
  - 版本；
  - 状态码：200 301 400 404 505
- 首部行：
  - Date：发送该相应报文的时间，也可以看做发送的数据获取的时间？
  - Last-Modified：目标数据最后修改/创建时间，用于区分本地还是缓存；
- cookie ：S 用来区分C ；
  - C 第一次访问时，由S 指定一个标识，在相应的首部行中加入 `set-cookie`；
  - 以后的C 的请求中，首部行都会添加 `cookie`；
  - 会定时删除，但会导致隐私问题；
- 网络缓存，好也不好（经典缓存论断）；
- 条件GET，通过增加首部行 `If-modified-since:` ，内容为Last-Modified的时间，判断是否一致；（由缓存方发起）

### Mail

- C 发送到邮件发送方服务器，再发送到邮件接收方服务器，最后发送到接收方，都是SMTP 协议；
- SMTP 是一种推协议，不能主动去索取，HTTP是一种拉协议，从别处获取资源；
- POP3，IMAP；

### DNS

- 采用UDP 协议通信，将域名翻译为IP 地址；
- 会导致网络通信额外的时延，因此需要缓存以及就近存取；
- DNS 采用分布式分布，根服务器，顶级域服务器，权威DNS 服务器；
- 层次之外，本地DNS 服务器，起到一个代理转发以及缓存的作用；
- DNS 记录：(Name, Value, Type, TTL)，TTL为该记录的生存时间，决定了什么时候被删除：
  - Type = A，主机名 - IP地址；
  - Type = NS，域（如 foo.com）- 如何获得该域中主机IP 地址的权威DNS 服务器的主机名；
  - Type = CNAME，别名 - 别名为NAME 的主机的规范主机名；
  - Type = MX，别名 - 别名为NAME 的邮件服务器的规范主机名；

### P2P

- 磁链？算是其中一种，分布式的，没有中心；迅雷应该不算中心，它只提供了一个下载加速的功能，资源本身还是从其他设备得到；
- 具有自扩展性，代价是不稳定的连接与不稳定的速度；
- DHT，分布式散列表 ，一种简单的数据库实现；
- 个人碎碎念（2024.7.11）：这大概七年的网络冲浪下来，P2P下载 ，尤其是以磁链为首的下载方式，可以说逐渐落后于时代。这不仅仅是技术上的更新迭代，还有国内网络环境的问题。磁链的下载极其依靠做种的人，只有做种的人多这个种子才能健康。但在国内的大环境，尤其是迅雷出现并广泛传播以后，国内做种的人数越来越少，只能说吸血雷不愧是吸血雷。

## 第三章，运输层

- 运输层协议将来自应用层的报文移动至网络边缘，但并不参与 其在网络中的传输；
- 网络传输本身是一种不可靠传输，但TCP通过协议规定将传输变为可靠传输；
- 多路复用与多路分解；
- 
